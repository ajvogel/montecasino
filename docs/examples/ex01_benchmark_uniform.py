import sys
import pathlib
import time
import casino as cs
import numpy as np
import matplotlib.pyplot as plt

data = np.array([
    [10,0.00000165381716879],
    [11,0.0000165381716879],
    [12,0.0000909599442836],
    [13,0.000363839777134],
    [14,0.00118247927569],
    [15,0.00331094197192],
    [16,0.00826081675812],
    [17,0.0187542866941],
    [18,0.0392946959305],
    [19,0.0767701929753],
    [20,0.140951529662],
    [21,0.244665711951],
    [22,0.403407352898],
    [23,0.634189269717],
    [24,0.953533095925],
    [25,1.37465944597],
    [26,1.90415547363],
    [27,2.53867550678],
    [28,3.26236936167],
    [29,4.04573294002],
    [30,4.84643679137],
    [31,5.61241048218],
    [32,6.28704385076],
    [33,6.81581054506],
    [34,7.15327193835],
    [35,7.26928059747],
    [36,7.15327193835],
    [37,6.81581054506],
    [38,6.28704385076],
    [39,5.61241048218],
    [40,4.84643679137],
    [41,4.04573294002],
    [42,3.26236936167],
    [43,2.53867550678],
    [44,1.90415547363],
    [45,1.37465944597],
    [46,0.953533095925],
    [47,0.634189269717],
    [48,0.403407352898],
    [49,0.244665711951],
    [50,0.140951529662],
    [51,0.0767701929753],
    [52,0.0392946959305],
    [53,0.0187542866941],
    [54,0.00826081675812],
    [55,0.00331094197192],
    [56,0.00118247927569],
    [57,0.000363839777134],
    [58,0.0000909599442836],
    [59,0.0000165381716879],
    [60,0.00000165381716879]])





print('Running...')
tic = time.time()
tri1 = cs.Uniform(1,6)
N = 10

bla = tri1 

for i in range(N - 1):
    bla = bla + cs.Uniform(1,6)

toc = time.time()

print(f'Took {(toc - tic) * 1000} milliseconds')


cnts = bla.getCountArray()
lwr  = bla.getLowerArray()
upr  = bla.getUpperArray()

for l, u, c in zip(lwr, upr, cnts):
    print(f'[{l: >8d}; {u: >8d}): {u - l:>5d}: {c/cnts.sum():e}')

    
print(f' {N*1} -> {6*N}')

print(sum(bla.getCountArray()))


#TODO: Plot cummulative graphs over each other.
# Possibly from phaseOneAdds.

y2 = np.array([bla.pmf(k) for k in range(10,61)])

fig = plt.figure()
ax = fig.gca()

x = data[:,0]
y = data[:,1]/100
yy = np.cumsum(y)
yy2 = np.cumsum(y2)
ax.plot(x, yy,'*-')
ax.plot(x, yy2,'*-')
plt.show()

